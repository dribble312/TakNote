# 如何理解补码

计算机里的数据都是用补码来存储的。

从原码到补码的转换上来说，正数的补码和原码相同；负数的补码是除符号位不动以外，其他每个位都取反之后，再最后加一。

>`1000 0001`代表-1，则它的补码为`1111 1111`。幸好`1000 0000`无意义，否则就迷惑了。

## 如何理解补码？当成时钟吧

考虑时钟, 时钟的时刻数有 1~12，12 个时刻（0 就是 12），9 点这个时刻也可以被记成差 12 点 3 个小时，12 点也可以叫差 0 个小时。

>小时候一直想为什么晚上十二点不能叫做早上零点呢，其实叫零点也是有道理的。
>
>之所以说这些奇怪的话，是为了赋予你一个独特的视角，计算机记录数据的时候就用到了这种巧妙的想法

所以把-3记成9（因为比0即12少了3）：这个过程和补码的转换一样，比如考虑四位的补码，-3的原码是`1011`，补码是`1101`，四位的满值是`10000`（这里因为无法达到满值，因此可以这么说），`10000 - 0011 = 1101`，再转换到十进制来看，`1101`是13，也就是比16差了3。

从补码来看，我们可以取到最小的负数的原码应当是`1111`，那么转换得到对应的补码是`1001`，可以看到这个十进制的值是-7，也就是比16（就是0）少了7，而`10000 - 0111 = 1001`，正和前面转换得到的补码相同。

因此当要表示的数是正数时，是在`0000`的基础上加，当要表示的数是负数时，是在`10000`的基础上减。

因为四位数要表示正负，只能表示16种数字，所以两边都必须小于8，这样一来，不是只表示了15种数字吗，还有一个是1000，这时候是负数的情况，减去了1000，因此，其实前面说的两边都必须小于8是不对的，负数这边是可以等于8的，因为这时候符号位并没有变，不如说是因为挑选的是负数这边可以使用8，才使得第一个数字有了符号位的作用。

>思考一下如果一开始制定补码的标准时，规定可以在`0000`的基础上加上`1000`，会怎么样？是的，符号位失去了它的作用，所以也乐得顺水推舟，让负数的部分多表示一个数字，这样第一位就是符号位啦！

## 加代替减

有了上面这些作为基础，可以实现以加代替减。在十进制的基础上16 - 9即为16 +(16 - 7)，因此补码即是这个减去了7的16，当结果是负数时是非常容易思考的，这相当于在`10000`的基础上增加了，让负数的结果更加偏向于0了；而当结果是正数的时候，发生了进位，而进位被忽略了（因为超出了长度限制）

>比如考虑7-3的情况，7是0111，-3是1101，结果是0100，此时发生了进位，但是结果仍然是正确的！虽然-3在二进制中是`10000 - 0011`，即16-3，但是由于7-3是一个正数，`10000`中的1无法对有效位产生影响，因此被忽略，产生的效果仍然是 `0111 - 0011`。真妙！